import{q as M,j as e,s as F,a5 as I,a as C,r as P,B as S,S as E,az as R,T as f,c as D,F as v,aA as T,g as k,ay as b,I as w,aB as y}from"./index-ZjgjDmZy.js";import{u as N,U as d}from"./constant-DlLz-PDG.js";import{a as O,b as L,c as H,C as W}from"./user.hook-w4gggENV.js";import{u as B,t as U,C as g,F as z}from"./index-IKM86iON.js";import{u as K,a as V}from"./type-DrWV_Ekq.js";import{C as q}from"./index-CTJiQCMs.js";import{m as G}from"./constant-BWNkMYyM.js";import"./useMediaQuery-2e4CxuwT.js";const Y=M(e.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),J=F(I)(()=>({height:120,width:"100%",display:"flex",justifyContent:"center",alignItems:"center",border:"2px dashed #ccc"})),Q=()=>{const{user:s,login:o}=C(),[a,r]=P.useState(s.avatar),[m,n]=P.useState(null),{mutate:j,isPending:h}=O({id:s.id}),p=t=>{var u;const i=(u=t.target.files)==null?void 0:u[0];if(i){n(i);const l=new FileReader;l.onload=()=>{r(l.result)},l.readAsDataURL(i)}},c=t=>{var u;t.preventDefault();const i=(u=t.dataTransfer.files)==null?void 0:u[0];if(i){n(i);const l=new FileReader;l.onload=()=>{r(l.result)},l.readAsDataURL(i)}},x=t=>{t.preventDefault()},A=()=>{m&&j({avatar:m},{onSuccess(t){o(t.user)}})};return e.jsxs(S,{marginTop:4,children:[e.jsxs(E,{width:"100%",gap:2,children:[e.jsx(R,{src:a,sx:{width:{xs:50,sm:120},height:{xs:50,sm:120}}}),e.jsx(J,{variant:"outlined",onDrop:c,onDragOver:x,children:e.jsxs(S,{children:[e.jsx(f,{align:"center",children:"Kéo và thả ảnh vào đây"}),e.jsx(f,{align:"center",color:"textSecondary",marginY:1,children:"-hoặc-"}),e.jsxs(D,{variant:"outlined",component:"label",sx:{textTransform:"none"},children:["Chọn ảnh từ máy tính",e.jsx("input",{hidden:!0,accept:"image/*",type:"file",onChange:p})]})]})})]}),e.jsx(v,{marginTop:4,children:e.jsx(D,{variant:"contained",disabled:h,onClick:A,children:"Lưu thay đổi"})})]})},X=()=>{var h,p,c;const{user:s}=C(),{register:o,handleSubmit:a,formState:{errors:r}}=B({resolver:U(K),values:N}),{mutate:m,isPending:n}=L({id:s.id}),j=a(x=>{m(x)});return e.jsx("form",{onSubmit:j,children:e.jsx(E,{flexDirection:"column",children:e.jsxs(E,{flexDirection:"column",gap:2,children:[e.jsx(g,{label:"Mật khẩu hiện tại",type:"password",errorMsg:(h=r.currentPassword)==null?void 0:h.message,registerProps:o("currentPassword")}),e.jsx(g,{label:"Mật khẩu mới",type:"password",errorMsg:(p=r.newPassword)==null?void 0:p.message,registerProps:o("newPassword")}),e.jsx(g,{label:"Nhập lại mật khẩu mới",type:"password",errorMsg:(c=r.confirmNewPassword)==null?void 0:c.message,registerProps:o("confirmNewPassword")}),e.jsx(v,{marginTop:4,children:e.jsx(D,{variant:"contained",type:"submit",disabled:n,children:"Đổi mật khẩu"})})]})})})},Z=()=>{var c,x,A,t,i;const{user:s,login:o}=C(),a=B({resolver:U(V),values:{email:s.email,username:s.username,fullName:s.fullName,gender:s.gender,dateOfBirth:s.dateOfBirth}}),{register:r,handleSubmit:m,formState:{errors:n}}=a,{mutate:j,isPending:h}=H({id:s==null?void 0:s.id}),p=m(u=>{j({...s,...u},{onSuccess(l){o(l.user)}})});return e.jsx("form",{onSubmit:p,children:e.jsxs(T,{gap:2,children:[e.jsxs(z,{...a,children:[e.jsx(g,{label:"Email",registerProps:r("email"),errorMsg:(c=n.email)==null?void 0:c.message}),e.jsx(g,{label:"Username",registerProps:r("username"),errorMsg:(x=n.username)==null?void 0:x.message}),e.jsx(g,{label:"Họ và tên",registerProps:r("fullName"),errorMsg:(A=n.fullName)==null?void 0:A.message}),e.jsxs(E,{gap:2,children:[e.jsx(q,{label:"Giới tính",selectOptions:k,registerProps:r("gender"),errorMsg:(t=n.gender)==null?void 0:t.message,placeholder:"Chọn giới tính"}),e.jsx(W,{label:"Ngày sinh",errorMsg:(i=n.dateOfBirth)==null?void 0:i.message,registerProps:r("dateOfBirth")})]})]}),e.jsx(v,{marginTop:4,children:e.jsx(D,{variant:"contained",type:"submit",disabled:h,children:"Lưu thay đổi"})})]})})},ie=()=>{const[s,o]=P.useState(d.PROFILE);return e.jsx(E,{justifyContent:"center",children:e.jsxs(E,{width:"100%",maxWidth:800,marginTop:4,gap:2,children:[e.jsxs(b,{minWidth:40,width:{xs:"15%",sm:"25%"},children:[e.jsx(f,{variant:"h6",display:{xs:"none",sm:"block"},children:"CÀI ĐẶT"}),e.jsx(w,{children:e.jsx(f,{display:{xs:"block",sm:"none"},children:e.jsx(Y,{})})}),G.map(a=>e.jsxs(S,{onClick:()=>o(a.path),children:[e.jsx(y,{display:{xs:"none",sm:"block"},children:a.pathName}),e.jsx(w,{children:e.jsx(y,{display:{xs:"block",sm:"none"},children:a.icon})})]},a.path))]}),e.jsxs(b,{width:{xs:"85%",sm:"75%"},children:[e.jsxs(f,{variant:"h6",children:["CHỈNH SỬA ",s===d.PROFILE&&"HỒ SƠ",s===d.AVATAR&&"ẢNH ĐẠI DIỆN",s===d.PASSWORD&&"MẬT KHẨU"," CỦA BẠN"]}),s===d.PROFILE&&e.jsx(Z,{}),s===d.AVATAR&&e.jsx(Q,{}),s===d.PASSWORD&&e.jsx(X,{})]})]})})};export{ie as default};
